# OpenCode TUI Image Clipboard Fix

ä¿®å¤ OpenCode TUI ä¸­å›¾ç‰‡ç²˜è´´å’Œæ‹–å…¥çš„é—®é¢˜ï¼šè‡ªåŠ¨å°†å›¾ç‰‡ä¿å­˜ä¸ºæœ¬åœ°æ–‡ä»¶ï¼Œå¹¶æ›¿æ¢ `[Image N]` å ä½ç¬¦ä¸ºå®é™…æ–‡ä»¶è·¯å¾„ã€‚

## ğŸš€ ä¸€é”®å®‰è£…

```bash
curl -fsSL https://raw.githubusercontent.com/A11thwn/opencode-tui-image-clipboard-fix/main/install.sh | bash
```

å®‰è£…å®Œæˆåï¼Œé‡å¯ OpenCode å³å¯ä½¿ç”¨ã€‚

## ğŸ“¦ æ‰‹åŠ¨å®‰è£…

åœ¨ `~/.config/opencode/opencode.json` çš„ `plugin` æ•°ç»„ä¸­æ·»åŠ ï¼š

```json
{
  "plugin": ["github:A11thwn/opencode-tui-image-clipboard-fix"]
}
```

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- âœ… **è‡ªåŠ¨ä¿å­˜å›¾ç‰‡**ï¼šå°† base64 å›¾ç‰‡æ•°æ®ä¿å­˜ä¸ºæœ¬åœ°æ–‡ä»¶
- âœ… **è·¯å¾„æ›¿æ¢**ï¼šè‡ªåŠ¨æ›¿æ¢ `[Image 1]` å ä½ç¬¦ä¸º `/path/to/image.png`
- âœ… **å»é‡æ£€æµ‹**ï¼šä½¿ç”¨ SHA-256 å“ˆå¸Œé¿å…ä¿å­˜é‡å¤å›¾ç‰‡
- âœ… **LRU æ¸…ç†**ï¼šå½“å­˜å‚¨è¶…è¿‡é™åˆ¶æ—¶è‡ªåŠ¨åˆ é™¤æœ€æ—§çš„å›¾ç‰‡
- âœ… **ç§»é™¤ FilePart**ï¼šé¿å…ä¸æ”¯æŒå›¾ç‰‡çš„æ¨¡å‹æŠ¥é”™
- âœ… **è‡ªåŠ¨æç¤º**ï¼šæ·»åŠ æç¤ºè®©æ¨¡å‹ä½¿ç”¨ `read` å·¥å…·è¯»å–å›¾ç‰‡

## ğŸ”§ å·¥ä½œåŸç†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                OpenCode TUI                         â”‚
â”‚  ç”¨æˆ·ç²˜è´´/æ‹–å…¥å›¾ç‰‡                                    â”‚
â”‚  â†“                                                  â”‚
â”‚  ç”Ÿæˆ FilePart (url: "data:image/...;base64,...")  â”‚
â”‚  æ¶ˆæ¯æ–‡æœ¬åŒ…å« [Image 1] å ä½ç¬¦                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Image Clipboard Fix Plugin                â”‚
â”‚  1. ç›‘å¬ chat.message hook                          â”‚
â”‚  2. æ£€æµ‹å›¾ç‰‡ FilePart                               â”‚
â”‚  3. æå– base64 æ•°æ®ï¼Œä¿å­˜ä¸ºæœ¬åœ°æ–‡ä»¶                   â”‚
â”‚  4. æ›¿æ¢æ–‡æœ¬ä¸­çš„ [Image N] ä¸ºå®é™…è·¯å¾„                 â”‚
â”‚  5. ç§»é™¤ FilePartï¼ˆé¿å…æ¨¡å‹æŠ¥é”™ï¼‰                    â”‚
â”‚  6. æ·»åŠ æç¤ºè®©æ¨¡å‹ä½¿ç”¨ read å·¥å…·è¯»å–å›¾ç‰‡              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                æœ€ç»ˆæ¶ˆæ¯                              â”‚
â”‚  "è¯·åˆ†æè¿™å¼ å›¾ç‰‡ /path/to/image.png                  â”‚
â”‚   [Image Reference: ...]"                           â”‚
â”‚  æ¨¡å‹ä½¿ç”¨ read å·¥å…·è¯»å–å›¾ç‰‡                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## âš™ï¸ é…ç½®

é»˜è®¤é…ç½®ï¼š

- **å­˜å‚¨ç›®å½•**: `~/.local/share/opencode/storage/images`
- **æœ€å¤§å­˜å‚¨**: 2048 MB
- **æœ€å°å‰©ä½™ç©ºé—´**: 512 MB

## ğŸ“ æ”¯æŒçš„æ ¼å¼

- PNG (æ”¯æŒå°ºå¯¸æå–)
- JPEG/JPG
- GIF
- WebP

## ğŸ› è§£å†³çš„é—®é¢˜

1. **ç²˜è´´å›¾ç‰‡è¯†åˆ«é—®é¢˜**ï¼šå°† base64 å›¾ç‰‡ä¿å­˜ä¸ºæ–‡ä»¶ï¼Œæ›¿æ¢å ä½ç¬¦ä¸ºè·¯å¾„
2. **æ¨¡å‹ä¸æ”¯æŒå›¾ç‰‡æŠ¥é”™**ï¼šç§»é™¤ FilePartï¼Œåªå‘é€æ–‡æœ¬è·¯å¾„
3. **å›¾ç‰‡è¯»å–æç¤º**ï¼šè‡ªåŠ¨æ·»åŠ æç¤ºè®©æ¨¡å‹ä½¿ç”¨ read å·¥å…·è¯»å–å›¾ç‰‡

## ğŸ”— ç›¸å…³é“¾æ¥

- [OpenCode](https://opencode.ai)
- [GitHub Issues](https://github.com/A11thwn/opencode-tui-image-clipboard-fix/issues)

## ğŸ“„ License

MIT
